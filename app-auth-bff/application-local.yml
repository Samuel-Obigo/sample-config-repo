# application-local.yml

server:
  servlet:
    session:
      cookie:
        path: /
        http-only: true
        same-site: Lax   # (gateway/외부 도메인 섞이면 None+Secure 고려)
        secure: false    # https면 true
  error:
    include-message: always
    include-stacktrace: always

variable:
  spring:
    security:
      oauth2:
        client:
          provider:
            registration:
              bff-client:
                client-id: auth-bff-client
                client-secret: auth-bff-secret
  app:
    auth: # 인증 서버 정보
      port: 9000
      base-url: http://localhost:${variable.app.auth.port}/auth
    resource: # 리소스 서버 정보
      port: 8081
      base-url: http://localhost:${variable.app.resource.port}/api
    front: # Auth Front 서버 정보
      port: 5173
      base-url: http://localhost:${variable.app.front.port}/authf/
---
spring:
  config:
    activate:
      on-profile: gateway

variable:
  app:
    gateway:
      port: 8000
    auth: # 인증 서버 정보
      port: ${variable.app.gateway.port}
    resource: # 리소스 서버 정보
      port: ${variable.app.gateway.port}
    front: # Auth Front 서버 정보
      port: ${variable.app.gateway.port}
---
spring:
  config:
    activate:
      on-profile: web

variable:
  web:
    # web > redis profile
    redis:
      host: localhost
      port: 6379
